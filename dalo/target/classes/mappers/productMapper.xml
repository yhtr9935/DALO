<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mappers.productMapper">
	<insert id="pcreate">
		insert into product(title, body)
		values (#{title}, #{body})
	</insert>
	
	<select id="pread" resultMap="productMap">
		select bno, title, body, regdate, viewcnt
		from product
		where bno = #{bno}
	</select>
	
	<resultMap type="ProductVO" id="productMap">
		<result property="bno" column = "bno" />
		<result property="type" column = "type" />
		<result property="title" column = "title" />
		<result property="body" column = "body" />
		<result property="viewcnt" column = "viewcnt" />
		<result property="regdate" column = "regdate" />
	</resultMap>
	
	<update id="pupdate">
		update product set title= #{title}, body = #{body}
		where bno = #{bno}
	</update>
	
	<delete id="pdelete">
		delete from product where bno = #{bno}
	</delete>
	
	<select id="plistCriteria" resultType="com.company.domain.ProductVO">
		<![CDATA[
			select bno, title, body, regdate, viewcnt
			from product where bno > 0
			order by bno desc, regdate desc
			limit #{pageStart}, #{perPageNum}
		]]>
	</select>
	
	<select id="pcountPaging" resultType="int">
	<![CDATA[
			select count(bno)
			from product
			where bno > 0
		]]>
		<!-- <include refid="search"></include> -->
	</select>
	
	<update id="pupdateCnt">
		update product set viewcnt = viewcnt+1 where bno = #{bno}
	</update>
	
	

</mapper>